<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <title>Caffora — Register</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Fonts & Bootstrap -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <style>
      :root {
        --gold: #ffd54f;
        --brown: #4b3f36;
        --ink: #2e2823;
        --muted: #8b8179;
        --surface-rgb: 255, 255, 255;
      }

      /* ===== Base ===== */
      html,
      body {
        height: 100%;
      }
      body {
        font-family: "Poppins", sans-serif;
        margin: 0;
        color: var(--ink);
        background: radial-gradient(
            circle at 20% 15%,
            rgba(255, 248, 219, 0.9) 0%,
            rgba(255, 248, 219, 0) 38%
          ),
          radial-gradient(
            circle at 80% 10%,
            rgba(255, 236, 185, 0.9) 0%,
            rgba(255, 236, 185, 0) 38%
          ),
          linear-gradient(160deg, #fff7d5 0%, #fffef8 42%, #ffffff 100%);
        position: relative;
      }
      @media (min-width: 769px) {
        body {
          background: url("assets/img/bg.jpg") center/cover no-repeat fixed;
        }
        body::before {
          content: "";
          position: fixed;
          inset: 0;
          pointer-events: none;
          z-index: 0;
          background: radial-gradient(
              80% 80% at 50% 30%,
              rgba(255, 239, 196, 0.18) 0%,
              rgba(255, 239, 196, 0) 60%
            ),
            radial-gradient(
              120% 90% at 50% 120%,
              rgba(0, 0, 0, 0.18) 0%,
              rgba(0, 0, 0, 0) 70%
            );
        }
      }

      .reg-wrap {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
        position: relative;
        z-index: 1;
      }

      /* Card glass — lebih lebar untuk 2 kolom */
      .reg-card {
        width: 100%;
        max-width: 720px;
        background: rgba(var(--surface-rgb), 0.76);
        -webkit-backdrop-filter: blur(14px) saturate(125%);
        backdrop-filter: blur(14px) saturate(125%);
        border-radius: 20px;
        border: 1px solid rgba(255, 214, 114, 0.35);
        box-shadow: 0 22px 48px rgba(0, 0, 0, 0.08),
          0 5px 14px rgba(0, 0, 0, 0.04),
          inset 0 1px 0 rgba(255, 255, 255, 0.35);
        padding: 22px 24px 20px;

        /* === animasi masuk (glass) === */
        opacity: 0;
        transform: translateY(12px) scale(0.985);
        filter: saturate(0.95) blur(2px);
        animation: cardIn 0.6s cubic-bezier(0.2, 0.7, 0.2, 1) 0.04s forwards;
      }

      .header-brand {
        text-align: center;
        margin-bottom: 14px;
        /* animasi isi */
        opacity: 0;
        transform: translateY(6px);
        animation: fadeUp 0.5s ease-out 0.16s forwards;
      }
      .header-brand .brand {
        font-family: "Playfair Display", serif;
        font-weight: 700;
        font-size: 1.7rem;
        color: var(--brown);
      }
      .muted {
        color: var(--muted);
        font-size: 0.85rem;
      }

      /* ===== Grid form: kiri = Nama+Email, kanan = Password+Konfirmasi ===== */
      .form-grid {
        display: grid;
        gap: 16px 18px;
      }
      @media (min-width: 992px) {
        .form-grid {
          grid-template-columns: 1fr 1fr;
          align-items: start;
        }
        .stack {
          display: grid;
          gap: 16px;
        }
        .col-span-2 {
          grid-column: 1 / -1;
        }
      }
      .form-label {
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 4px;
      }
      .form-control {
        height: 40px;
        border-radius: 10px;
        background: #fff;
        border: 1px solid rgba(46, 40, 35, 0.15);
        font-size: 13.5px;
        padding: 0 14px;
        transition: border-color 0.18s ease, background-color 0.2s ease;
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.55);
      }
      .form-control:hover {
        border-color: rgba(246, 198, 58, 0.45);
      }
      .form-control:focus {
        outline: none !important;
        box-shadow: none !important;
        border-color: rgba(246, 198, 58, 0.8);
        border-width: 1px; /* garis fokus tipis */
        background-color: rgba(255, 255, 255, 0.98);
      }

      .pw-wrap {
        position: relative;
      }
      .pw-input {
        height: 40px;
        border-radius: 10px;
        padding-right: 42px;
      }
      .pw-toggle {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: transparent;
        border: none;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--brown);
        cursor: pointer;
        transition: transform 0.15s ease, opacity 0.15s ease;
      }
      .pw-toggle:hover {
        transform: scale(1.06);
        opacity: 0.9;
      }

      .agree-row {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 12.5px;
        color: var(--muted);
        margin-top: 2px;

        /* animasi isi */
        opacity: 0;
        transform: translateY(6px);
        animation: fadeUp 0.45s ease-out 0.56s forwards;
      }
      .agree-row input[type="checkbox"] {
        width: 15px;
        height: 15px;
        cursor: pointer;
      }

      /* ===== Button: ukuran sama seperti login (dibatasi max-width & di-center) ===== */
      .btn-brand {
        width: 100%;
        max-width: 420px;
        height: 42px;
        border-radius: 10px;
        border: none;
        background: linear-gradient(180deg, var(--gold) 0%, #ffc92b 100%);
        color: var(--brown);
        font-weight: 700;
        font-size: 0.92rem;
        margin: 0 auto;
        display: block;

        /* animasi isi */
        opacity: 0;
        transform: translateY(6px);
        animation: fadeUp 0.45s ease-out 0.64s forwards;
        transition: transform 0.12s ease, box-shadow 0.18s ease,
          filter 0.18s ease;
      }
      .btn-brand:hover {
        transform: translateY(-1px);
        filter: brightness(0.98);
      }
      .btn-brand:disabled {
        opacity: 0.55;
        cursor: not-allowed;
      }

      /* "atau daftar dengan" */
      .social-title {
        text-align: center;
        font-size: 13px;
        font-weight: 400;
        color: var(--muted);
        margin: 14px 0 8px;
      }

      /* icon baris */
      .social-row {
        display: flex;
        justify-content: center;
        gap: 18px;
        margin-bottom: 6px;
      }
      .social-row a svg {
        transition: transform 0.2s ease, opacity 0.2s ease;
      }
      .social-row a:hover svg {
        transform: translateY(-3px) scale(1.05);
        opacity: 0.9;
      }

      /* "Sudah punya akun?" — samakan dengan login */
      .to-login {
        text-align: center;
        margin-top: 10px;
        font-size: 15px;
        color: var(--ink);
        font-weight: 400;
      }

      /* link Login */
      .to-login a {
        color: #1a73e8;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s ease, transform 0.15s ease;
      }
      .to-login a:hover {
        color: var(--gold) !important;
        transform: translateY(-1px);
      }

      /* ===== Modal S&K (tetap) ===== */
      .modal.custom-terms {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.35);
        padding: 16px;
        z-index: 1055;
      }
      .modal.custom-terms.open {
        display: flex;
      }
      .modal-card {
        width: 100%;
        max-width: 640px;
        max-height: 90vh;
        background: #fff;
        border-radius: 14px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }
      .modal-head {
        padding: 14px 16px 12px;
        border-bottom: 1px solid #eee;
        display: flex;
        justify-content: space-between;
        gap: 12px;
      }
      .modal-title {
        margin: 0;
        font-weight: 600;
        font-size: 1.1rem;
      }
      .modal-body {
        flex: 1;
        overflow: auto;
        padding: 16px;
        line-height: 1.6;
        font-size: 0.9rem;
      }
      .modal-foot {
        padding: 12px 16px;
        border-top: 1px solid #eee;
        display: flex;
        gap: 10px;
        justify-content: flex-end;
      }
      .btn-outline-foot {
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 12px;
        height: 38px;
        padding: 0 16px;
        font-weight: 600;
        cursor: pointer;
      }
      .btn-accept {
        background: var(--gold);
        color: var(--brown);
        border: 0;
        border-radius: 12px;
        height: 38px;
        padding: 0 16px;
        font-weight: 600;
        cursor: pointer;
      }
      .btn-accept:disabled {
        background: #f0e3b0;
        color: #9b8a5d;
      }

      /* ===== Mobile ===== */
      @media (max-width: 768px) {
        body {
          background: #fff;
        }
        .reg-card {
          max-width: 360px;
          background: #fff;
          border: none;
          box-shadow: none;
          border-radius: 0;
          padding: 0 16px 16px;
        }
        .form-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 14px;
        }
        .stack {
          display: grid;
          gap: 14px;
        }
        .col-span-2 {
          grid-column: auto;
        }
        .btn-brand {
          max-width: 100%;
        }
      }

      /* ====== Animasi bottom section ====== */
      .social-title,
      .social-row,
      .to-login {
        opacity: 0;
        transform: translateY(6px);
        animation: fadeUp 0.55s ease-out forwards;
      }
      /* delay */
      .social-row {
        animation-delay: 0.12s;
      }
      .to-login {
        animation-delay: 0.22s;
      }

      /* icons hover subtle lift */
      .social-row a {
        transition: transform 0.2s ease, opacity 0.2s ease;
      }
      .social-row a:hover {
        transform: translateY(-3px) scale(1.05);
        opacity: 0.9;
      }
      .form-grid .stack:first-child .mb-field:nth-child(1) {
        opacity: 0;
        transform: translateY(6px);
        animation: fadeUp 0.45s ease-out 0.24s forwards;
      }
      .form-grid .stack:first-child .mb-field:nth-child(2) {
        opacity: 0;
        transform: translateY(6px);
        animation: fadeUp 0.45s ease-out 0.32s forwards;
      }
      .form-grid .stack:last-child .mb-field:nth-child(1) {
        opacity: 0;
        transform: translateY(6px);
        animation: fadeUp 0.45s ease-out 0.4s forwards;
      }
      .form-grid .stack:last-child .mb-field:nth-child(2) {
        opacity: 0;
        transform: translateY(6px);
        animation: fadeUp 0.45s ease-out 0.48s forwards;
      }

      /* ====== Keyframes ====== */
      @keyframes fadeUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes cardIn {
        0% {
          opacity: 0;
          transform: translateY(12px) scale(0.985);
          filter: saturate(0.95) blur(2px);
        }
        70% {
          filter: saturate(1) blur(0);
        }
        100% {
          opacity: 1;
          transform: translateY(0) scale(1);
          filter: none;
        }
      }

      /* ====== Reduced motion support ====== */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation: none !important;
          transition: none !important;
        }
      }
    </style>
  </head>
  <body>
    <div class="reg-wrap">
      <div class="reg-card">
        <div class="header-brand">
          <i class="bi bi-cup-hot-fill fs-1 text-warning"></i>
          <h2 class="brand mb-1">Caffora</h2>
          <p class="muted mb-0">Buat akun pelanggan</p>
        </div>

        <form
          id="registerForm"
          action="../backend/register.php"
          method="post"
          novalidate
        >
          <div class="form-grid">
            <!-- Kolom kiri: Nama + Email -->
            <div class="stack">
              <div class="mb-field">
                <label class="form-label" for="name">Username</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  class="form-control"
                  placeholder="Minimal 5 karakter "
                  required
                />
              </div>
              <div class="mb-field">
                <label class="form-label" for="email">Email</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="form-control"
                  placeholder="Email@contoh.com"
                  required
                />
                <small id="emailHint" class="input-hint"></small>
              </div>
            </div>

            <!-- Kolom kanan: Password + Konfirmasi -->
            <div class="stack">
              <div class="mb-field">
                <label class="form-label" for="password">Password</label>
                <div class="pw-wrap">
                  <input
                    type="password"
                    id="password"
                    name="password"
                    class="form-control pw-input"
                    placeholder="Minimal 6 karakter (huruf dan angka)"
                    required
                  />
                  <button
                    type="button"
                    class="pw-toggle"
                    id="togglePw1"
                    aria-label="Tampilkan password"
                  >
                    <i id="eyeIcon1" class="bi bi-eye"></i>
                  </button>
                </div>
              </div>
              <div class="mb-field">
                <label class="form-label" for="confirm_password"
                  >Konfirmasi Password</label
                >
                <div class="pw-wrap">
                  <input
                    type="password"
                    id="confirm_password"
                    name="confirm_password"
                    class="form-control pw-input"
                    placeholder="Ulangi password"
                    required
                  />
                  <button
                    type="button"
                    class="pw-toggle"
                    id="togglePw2"
                    aria-label="Tampilkan konfirmasi password"
                  >
                    <i id="eyeIcon2" class="bi bi-eye"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- Setuju S&K (span 2 kolom) -->
            <div class="agree-row col-span-2">
              <input id="agree" name="agree" type="checkbox" disabled />
              <label for="agree" class="m-0">
                Saya setuju dengan
                <a
                  href="#"
                  id="openTerms"
                  style="color: #0d6efd; font-weight: 500"
                  >Syarat & Ketentuan</a
                >
              </label>
            </div>

            <!-- Button (span 2 kolom, tapi lebarnya dibatasi seperti login) -->
            <div class="col-span-2">
              <button type="submit" class="btn-brand" id="btnSubmit">
                Daftar
              </button>
            </div>
          </div>
        </form>

        <div class="social-title">atau daftar dengan</div>
        <div class="social-row">
          <!-- Google -->
          <a href="#" aria-label="Daftar dengan Google" title="Google">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 533.5 544.3"
              role="img"
            >
              <path
                fill="#4285F4"
                d="M533.5 278.4c0-17.4-1.6-34.1-4.6-50.4H272.1v95.3h146.9c-6.3 33.7-25.2 62.3-53.6 81.5l86.6 67.3c50.5-46.6 81.5-115.2 81.5-193.7z"
              />
              <path
                fill="#34A853"
                d="M272.1 544.3c72.9 0 134.1-24.1 178.8-65.5l-86.6-67.3c-24 16.1-54.8 25.6-92.2 25.6-70.9 0-131-47.9-152.6-112.1l-89.7 69.3c44.5 88.1 135.6 150 242.3 150z"
              />
              <path
                fill="#FBBC05"
                d="M119.5 324.9c-5.6-16.8-8.8-34.7-8.8-53s3.2-36.2 8.8-53l-89.7-69.3C10.6 181.1 0 226.8 0 271.9s10.6 90.8 29.8 122.3l89.7-69.3z"
              />
              <path
                fill="#EA4335"
                d="M272.1 107.3c39.7 0 75.3 13.7 103.3 40.6l77.5-77.5C406.1 24.8 345 0 272.1 0 165.4 0 74.3 61.9 29.8 149.6l89.7 69.3c21.6-64.2 81.7-111.6 152.6-111.6z"
              />
            </svg>
          </a>
          <!-- Apple -->
          <a href="#" aria-label="Daftar dengan Apple" title="Apple">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 24 24"
              role="img"
              fill="#000"
            >
              <path
                d="M16.365 1.43c0 1-.41 1.98-1.07 2.7-.69.76-1.84 1.34-2.85 1.24-.13-1.06.46-2.1 1.11-2.77.73-.75 1.99-1.3 2.81-1.17zM20.53 17.08c-.46 1.07-1.01 2.12-1.8 3.16-.96 1.25-2.16 2.8-3.74 2.83-1.4.03-1.85-.82-3.43-.82-1.58 0-2.07.8-3.46.85-1.59.06-2.8-1.35-3.77-2.59-2.06-2.62-3.65-7.41-1.52-10.64 1.08-1.66 2.9-2.71 4.92-2.74 1.53-.03 2.97 1.02 3.43 1.02.46 0 2.38-1.26 4.01-1.07.68.03 2.59.28 3.82 2.16-3.36 1.78-2.83 6.41.54 7.83z"
              />
            </svg>
          </a>
          <!-- Facebook -->
          <a href="#" aria-label="Daftar dengan Facebook" title="Facebook">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 24 24"
              role="img"
            >
              <path
                fill="#1877F2"
                d="M24 12a12 12 0 1 0-13.875 11.85v-8.385H7.077V12h3.048V9.356c0-3.012 1.793-4.687 4.533-4.687 1.312 0 2.686.235 2.686.235v2.953h-1.514c-1.494 0-1.96.929-1.96 1.883V12h3.328l-.532 3.465h-2.796v8.385A12.002 12.002 0 0 0 24 12"
              />
            </svg>
          </a>
        </div>

        <div class="to-login">
          <small>Sudah punya akun? <a href="login.html">Login</a></small>
        </div>
      </div>
    </div>

    <!-- ===== MODAL S&K ===== -->
    <div
      class="modal custom-terms"
      id="termsModal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="termsTitle"
    >
      <div class="modal-card">
        <div class="modal-head">
          <div>
            <h3 class="modal-title" id="termsTitle">Syarat &amp; Ketentuan</h3>
            <div style="font-size: 0.8rem; color: #888">Caffora</div>
          </div>
          <button class="btn-outline-foot" id="closeTerms">Tutup</button>
        </div>
        <div class="modal-body" id="termsBody">
          <p>
            <strong>1. Akun &amp; Privasi</strong> – data Anda kami gunakan
            untuk keperluan layanan.
          </p>
          <p><strong>2. Keamanan</strong> – jaga kerahasiaan password.</p>
          <p>
            <strong>3. Pemesanan &amp; Pembayaran</strong> – pesanan sah setelah
            pembayaran terkonfirmasi.
          </p>
          <p><strong>4. Refund</strong> – mengikuti kebijakan gerai.</p>
          <p>
            <strong>5. Perubahan</strong> – Caffora dapat memperbarui ketentuan
            ini sewaktu-waktu.
          </p>
          <p>Scroll sampai bawah agar bisa menekan tombol <em>Setuju</em>.</p>
          <div style="height: 260px"></div>
        </div>
        <div class="modal-foot">
          <button class="btn-outline-foot" id="cancelTerms">Batal</button>
          <button class="btn-accept" id="acceptTerms" disabled>Setuju</button>
        </div>
      </div>
    </div>

    <script>
      // toggle password
      (function () {
        const pairs = [
          { input: "password", btn: "togglePw1", icon: "eyeIcon1" },
          { input: "confirm_password", btn: "togglePw2", icon: "eyeIcon2" },
        ];
        pairs.forEach(({ input, btn, icon }) => {
          const pw = document.getElementById(input);
          const b = document.getElementById(btn);
          const ic = document.getElementById(icon);
          b.addEventListener("click", function () {
            const show = pw.type === "password";
            pw.type = show ? "text" : "password";
            ic.classList.toggle("bi-eye", !show);
            ic.classList.toggle("bi-eye-slash", show);
          });
        });
      })();

      // modal S&K
      (function () {
        const modal = document.getElementById("termsModal");
        const openBtn = document.getElementById("openTerms");
        const closeBtn = document.getElementById("closeTerms");
        const cancelBtn = document.getElementById("cancelTerms");
        const acceptBtn = document.getElementById("acceptTerms");
        const termsBody = document.getElementById("termsBody");
        const agreeCb = document.getElementById("agree");

        function openModal() {
          modal.classList.add("open");
          termsBody.scrollTop = 0;
          setTimeout(() => {
            if (termsBody.scrollHeight <= termsBody.clientHeight + 2) {
              acceptBtn.disabled = false;
            }
          }, 50);
        }
        function closeModal() {
          modal.classList.remove("open");
        }

        openBtn.addEventListener("click", (e) => {
          e.preventDefault();
          openModal();
        });
        closeBtn.addEventListener("click", closeModal);
        cancelBtn.addEventListener("click", closeModal);

        termsBody.addEventListener("scroll", () => {
          const atBottom =
            termsBody.scrollTop + termsBody.clientHeight >=
            termsBody.scrollHeight - 2;
          if (atBottom) acceptBtn.disabled = false;
        });

        acceptBtn.addEventListener("click", () => {
          agreeCb.disabled = false;
          agreeCb.checked = true;
          closeModal();
        });

        modal.addEventListener("click", (ev) => {
          if (ev.target === modal) closeModal();
        });
      })();

      // cek email
      (function () {
        const emailInput = document.getElementById("email");
        const emailHint = document.getElementById("emailHint");
        const submitBtn = document.getElementById("btnSubmit");
        const form = document.getElementById("registerForm");

        let emailTaken = false,
          debounce = null;

        function setHint(msg, isError) {
          emailHint.textContent = msg || "";
          emailHint.classList.remove("error");
          if (isError) emailHint.classList.add("error");
        }

        async function doCheckEmail() {
          const val = emailInput.value.trim();
          if (!val || !val.includes("@") || val.endsWith("@")) {
            setHint("", false);
            emailTaken = false;
            submitBtn.disabled = false;
            return;
          }
          try {
            const url = new URL("../backend/check_email.php", location.href);
            url.searchParams.set("email", val);
            const res = await fetch(url.toString(), {
              headers: {
                "X-Requested-With": "XMLHttpRequest",
                Accept: "application/json",
              },
            });
            const data = await res.json();
            if (data && data.exists) {
              setHint("Email tersebut sudah terdaftar. Silakan login.", true);
              emailTaken = true;
              submitBtn.disabled = true;
            } else {
              setHint("", false);
              emailTaken = false;
              submitBtn.disabled = false;
            }
          } catch (_) {
            setHint("", false);
            emailTaken = false;
            submitBtn.disabled = false;
          }
        }

        emailInput.addEventListener("keyup", () => {
          clearTimeout(debounce);
          debounce = setTimeout(doCheckEmail, 500);
        });
        emailInput.addEventListener("blur", () => {
          clearTimeout(debounce);
          doCheckEmail();
        });

        form.addEventListener("submit", function (e) {
          if (emailTaken) {
            e.preventDefault();
            setHint("Email tersebut sudah terdaftar. Silakan login.", true);
            return;
          }
          const p1 = document.getElementById("password").value.trim();
          const p2 = document.getElementById("confirm_password").value.trim();
          if (p1 !== p2) {
            e.preventDefault();
            alert("Konfirmasi password tidak sama.");
            return;
          }
          const agree = document.getElementById("agree");
          if (!agree.checked) {
            e.preventDefault();
            alert("Silakan baca & setujui Syarat & Ketentuan.");
            return;
          }

          e.preventDefault();
          const fd = new FormData(form);
          const emailNow = emailInput.value.trim();
          const registerUrl = "../backend/register.php";

          if (navigator.sendBeacon) {
            const payload = new URLSearchParams();
            for (const [k, v] of fd.entries()) payload.append(k, v);
            navigator.sendBeacon(registerUrl, payload);
          } else {
            fetch(registerUrl, {
              method: "POST",
              body: fd,
              keepalive: true,
            }).catch(() => {});
          }
          window.location.href =
            "/caffora-app1/public/verify_otp.html?email=" +
            encodeURIComponent(emailNow);
        });
      })();
    </script>
  </body>
</html>
